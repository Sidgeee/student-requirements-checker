<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Student Requirements Checker</title>
<style>
  /* ====== General Styles ====== */
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #f4f8f5;
    color: #333;
    margin: 0;
    padding: 0;
  }

  h2, h3 {
    text-align: center;
    color: #2f7a2f;
  }

  /* ====== Form Styles ====== */
  .form-container {
    background-color: white;
    max-width: 900px;
    margin: 20px auto;
    padding: 20px 30px;
    border-radius: 12px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  }

  .form-row {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    margin-bottom: 15px;
  }

  input, select {
    flex: 1 1 200px;
    padding: 10px;
    border-radius: 6px;
    border: 1px solid #ccc;
    font-size: 14px;
  }

  button {
    background-color: #4CAF50;
    color: white;
    padding: 12px 20px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 16px;
    transition: 0.3s;
  }

  button:hover {
    background-color: #45a049;
  }

  /* ====== Table Styles ====== */
  .table-container {
    max-width: 1000px;
    margin: 30px auto;
    overflow-x: auto;
  }

  table {
    border-collapse: collapse;
    width: 100%;
    background-color: white;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  }

  th, td {
    padding: 12px;
    text-align: center;
    border-bottom: 1px solid #ddd;
    font-size: 14px;
  }

  th {
    background-color: #2f7a2f;
    color: white;
  }

  tr:hover {
    background-color: #e8f4e8;
  }

  @media (max-width: 768px) {
    .form-row { flex-direction: column; }
    input, select { width: 100%; }
  }
</style>
</head>
<body>

<h2>Student Requirements Checker</h2>

<div class="form-container">
  <form id="studentForm">
    <div class="form-row">
      <input type="text" id="surname" placeholder="Surname" required>
      <input type="text" id="firstname" placeholder="First Name" required>
      <input type="text" id="middlename" placeholder="Middle Name" required>
    </div>
    <div class="form-row">
      <input type="text" id="dept" placeholder="Dept" required>
      <input type="text" id="year" placeholder="Year" required>
      <input type="text" id="section" placeholder="Section" required>
    </div>
    <div class="form-row">
      <select id="entry" required>
        <option value="">Select Entry</option>
        <option value="Regular">Regular</option>
        <option value="Transferee">Transferee</option>
      </select>
      <input type="text" id="prevschool" placeholder="Previous School">
      <input type="date" id="birthdate" required>
    </div>
    <div class="form-row">
      <select id="status" required>
        <option value="">Select Status</option>
        <option value="Complete">Complete</option>
        <option value="Pending">Pending</option>
      </select>
      <button type="submit">Submit</button>
    </div>
  </form>
</div>

<h3>Submitted Students</h3>
<div class="table-container">
  <table id="studentsTable">
    <thead>
      <tr>
        <th>Surname</th><th>First Name</th><th>Middle Name</th><th>Dept</th>
        <th>Year</th><th>Section</th><th>Entry</th><th>Prev School</th>
        <th>Birthdate</th><th>Status</th><th>Timestamp</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<script>
const WEB_APP_URL = https://script.google.com/macros/s/AKfycbxM5j42uxn6TY6Eo1ezK4i2xShhMHXAItQFsGS5VuFonIvlH5R9PFL5IBMRZSCiMkTR/exec; // Paste your Apps Script Web App URL

// ====== Submit Form ======
document.getElementById("studentForm").addEventListener("submit", function(e){
  e.preventDefault();
  const data = {
    surname: document.getElementById("surname").value,
    firstname: document.getElementById("firstname").value,
    middlename: document.getElementById("middlename").value,
    dept: document.getElementById("dept").value,
    year: document.getElementById("year").value,
    section: document.getElementById("section").value,
    entry: document.getElementById("entry").value,
    prevschool: document.getElementById("prevschool").value,
    birthdate: document.getElementById("birthdate").value,
    status: document.getElementById("status").value
  };

  fetch(WEB_APP_URL, {
    method: "POST",
    body: JSON.stringify(data)
  })
  .then(response => response.json())
  .then(result => {
    if(result.result === "success"){
      alert("Student submitted successfully!");
      document.getElementById("studentForm").reset();
      fetchStudents();
    } else {
      alert("Error: " + result.message);
    }
  })
  .catch(err => console.error(err));
});

// ====== Fetch Students and Auto-Refresh ======
function fetchStudents(){
  fetch(WEB_APP_URL)
    .then(res => res.json())
    .then(data => {
      const tbody = document.querySelector("#studentsTable tbody");
      tbody.innerHTML = "";
      data.forEach(student => {
        const row = `<tr>
          <td>${student.surname}</td>
          <td>${student.firstname}</td>
          <td>${student.middlename}</td>
          <td>${student.dept}</td>
          <td>${student.year}</td>
          <td>${student.section}</td>
          <td>${student.entry}</td>
          <td>${student.prevschool}</td>
          <td>${student.birthdate}</td>
          <td>${student.status}</td>
          <td>${new Date(student.timestamp).toLocaleString()}</td>
        </tr>`;
        tbody.insertAdjacentHTML("beforeend", row);
      });
    })
    .catch(err => console.error(err));
}

// Auto-refresh every 10 seconds
setInterval(fetchStudents, 10000);
fetchStudents(); // initial load
</script>

</body>
</html>
