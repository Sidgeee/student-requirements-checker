<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Registrar Dashboard</title>

<style>
body{
  font-family: Arial;
  background:#e8f5e9;
}
.container{
  max-width:1100px;
  margin:20px auto;
  background:#fff;
  padding:20px;
  border-radius:12px;
  box-shadow:0 4px 10px rgba(0,0,0,.1);
}
h2{color:#2e7d32;text-align:center}
.row{display:flex;gap:10px;margin-bottom:10px}
input,select{
  flex:1;padding:10px;border-radius:6px;border:1px solid #ccc
}
button{
  padding:10px 20px;border:none;border-radius:6px;
  cursor:pointer;font-weight:bold
}
.save{background:#2e7d32;color:white}
.cancel{background:#9e9e9e;color:white}
.req{display:flex;gap:15px}
table{
  width:100%;border-collapse:collapse;margin-top:20px
}
th,td{
  border:1px solid #ccc;padding:8px;text-align:center
}
th{background:#2e7d32;color:white}
</style>
</head>

<body>
<div class="container">
<h2>Registrar â€“ Student Requirements</h2>

<form id="form">
<div class="row">
<input id="surname" placeholder="Surname" required>
<input id="firstname" placeholder="First Name" required>
<input id="middlename" placeholder="Middle Name">
</div>

<div class="row">
<input id="dept" placeholder="Dept">
<input id="year" placeholder="Year">
<input id="section" placeholder="Section">
</div>

<div class="row">
<select id="entry">
<option>Regular</option>
<option>Transferee</option>
</select>
<input id="prevschool" placeholder="Previous School">
<input id="birthdate" type="date">
</div>

<div class="row">
<select id="status">
<option>Complete</option>
<option>Pending</option>
</select>
</div>

<b>Requirements:</b>
<div class="req">
<label><input type="checkbox" value="Form 138"> Form 138</label>
<label><input type="checkbox" value="Good Moral"> Good Moral</label>
<label><input type="checkbox" value="Birth Cert"> Birth Cert</label>
</div>

<br>
<button class="save" type="submit">Save Student</button>
<button class="cancel" type="button" onclick="document.getElementById('form').reset()">Cancel</button>
</form>

<table>
<thead>
<tr>
<th>Surname</th><th>First</th><th>Dept</th><th>Entry</th>
<th>Status</th><th>Requirements</th><th>Timestamp</th>
</tr>
</thead>
<tbody id="tbody"></tbody>
</table>
</div>

<script>
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbxM5j42uxn6TY6Eo1ezK4i2xShhMHXAItQFsGS5VuFonIvlH5R9PFL5IBMRZSCiMkTR/exec";

document.getElementById("form").onsubmit = e => {
  e.preventDefault();

  const reqs = [...document.querySelectorAll("input[type=checkbox]:checked")]
               .map(c=>c.value).join(", ");

  fetch(WEB_APP_URL,{
    method:"POST",
    body:JSON.stringify({
      surname:surname.value,
      firstname:firstname.value,
      middlename:middlename.value,
      dept:dept.value,
      year:year.value,
      section:section.value,
      entry:entry.value,
      prevschool:prevschool.value,
      birthdate:birthdate.value,
      status:status.value,
      requirements:reqs
    })
  }).then(()=>{form.reset();load();});
};

function load(){
fetch(WEB_APP_URL)
.then(r=>r.json())
.then(d=>{
  tbody.innerHTML="";
  d.forEach(s=>{
    tbody.innerHTML+=`
    <tr>
    <td>${s.Surname}</td>
    <td>${s["First Name"]}</td>
    <td>${s.Dept}</td>
    <td>${s.Entry}</td>
    <td>${s.Status}</td>
    <td>${s.Requirements}</td>
    <td>${s.Timestamp}</td>
    </tr>`;
  });
});
}
load();
</script>
</body>
</html>
